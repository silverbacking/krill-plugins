{
  "id": "krill-matrix",
  "name": "Matrix (Krill)",
  "version": "0.2.0",
  "description": "Krill-enabled Matrix channel plugin with protocol interception and auto-provisioning",
  "author": "Silverbacking",
  "configSchema": {
    "type": "object",
    "properties": {
      "gatewayId": {
        "type": "string",
        "description": "Krill gateway identifier"
      },
      "gatewaySecret": {
        "type": "string", 
        "description": "Secret key for Krill operations"
      },
      "adminToken": {
        "type": "string",
        "description": "Synapse Admin API token for auto-provisioning agents"
      },
      "autoProvision": {
        "type": "boolean",
        "description": "Automatically create and provision agents on startup",
        "default": false
      },
      "agents": {
        "type": "array",
        "description": "List of agents managed by this gateway",
        "items": {
          "type": "object",
          "properties": {
            "mxid": { 
              "type": "string",
              "description": "Matrix user ID (@user:server)"
            },
            "displayName": { 
              "type": "string",
              "description": "Display name for the agent"
            },
            "capabilities": { 
              "type": "array", 
              "items": { "type": "string" },
              "description": "Agent capabilities (chat, senses, calendar, location, etc.)"
            }
          },
          "required": ["mxid"]
        }
      }
    },
    "required": ["gatewayId", "gatewaySecret"]
  },
  "uiHints": {
    "gatewaySecret": { "label": "Gateway Secret", "sensitive": true },
    "gatewayId": { "label": "Gateway ID", "placeholder": "my-gateway-001" },
    "adminToken": { "label": "Synapse Admin Token", "sensitive": true, "placeholder": "syt_admin_xxx" },
    "autoProvision": { "label": "Auto-provision Agents" }
  }
}
